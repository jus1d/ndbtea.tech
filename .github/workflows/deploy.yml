name: Deploy

on:
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
        - name: Run on remote server
          uses: D3rHase/ssh-command-action@latest
          with:
            host: ${{ secrets.SSH_HOST }}
            port: ${{ secrets.SSH_PORT }}
            user: ${{ secrets.SSH_USER }}
            private_key: ${{ secrets.SSH_PRIVATE_KEY }}
            command: |
              cd apps/ndbtea.tech;
              npm install;
              npm run build;
              rm -rf /var/www/ndbtea.tech/out;
              mv ./dist/* /var/www/ndbtea.tech/out/;